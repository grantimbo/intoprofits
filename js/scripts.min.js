// ---------------------------
// Author : Grant Imbo
// Site : grantimbo.com
// Version : 4.0
// Description : Custom Script for grantimbo.com
// ---------------------------

$(function(){String.prototype.decodeHTML=function(){return $("<div>",{html:""+this}).html()},portfolioShow=function(){var e=document.title,t=(document.baseURI,$("html")),o=$("body"),n=($("main"),$('<div class="loading">Loadingâ€¦</div>')),a=$(".modal"),i=$(".portfolio-container"),l=homeLink+"/",c=homeLink+"/typography/",s=homeLink+"/motion-graphics/",r=homeLink+"/webdev/",m=homeLink+"/others/",u=function(e){document.title=e.match(/<title>(.*?)<\/title>/)[1].trim().decodeHTML()},h=function(e){i.html(n).load(e+" main>*",u),a.fadeIn(),o.hasClass("page-template-template-home")&&(o.css("overflow-y","hidden"),t.css("overflow-y","hidden"))},d=function(){document.title=e,history.pushState({},"",p),a.fadeOut(300),o.hasClass("page-template-template-home")&&(o.css("overflow-y","visible"),t.css("overflow-y","visible"))},f="state"in window.history&&null!==window.history.state,p=location.href;$(window).bind("popstate",function(e){var t=!f&&location.href==p;f=!0,t||h(location.pathname)}),$(document).on("click","a.post-link",function(e){e.preventDefault();var t=$(this).attr("href");h(t),history.pushState({page:t},null,t)}),$(document).on("click","a.close",function(e){switch(e.preventDefault(),p){case l:case c:case s:case r:case m:d();break;default:window.location.href=l}})},menuShow=function(){var e=$("#MenuContainer");$(document).on("click","a.icon-menu.mobile-menu",function(t){t.preventDefault(),e.animate({left:"0"})});var t=document.getElementById("MenuContainer");new Hammer(t).on("dragleft touch release",function(t){switch(menuWidth=e.width(),t.type){case"dragleft":e.css("left",t.gesture.deltaX+"px");break;case"touch":e.css("cursor","-webkit-grabbing");break;case"release":e.css("cursor","-webkit-grab"),"icon-cross mobile-menu"==t.target.className?e.animate({left:"-100%"}):Math.abs(t.gesture.deltaX)>menuWidth/2?e.animate({left:"-100%"}):e.animate({left:"0"})}})},portfolioShow(),menuShow(),console.log("-------------------------------"),console.log("|    Written by Grant Imbo    |"),console.log("-------------------------------")});